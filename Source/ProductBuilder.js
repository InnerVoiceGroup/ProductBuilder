window.addEventListener("load",function(){_product=new Product(Config.Product[0]);_product.Load();$(Config.DOM.Preview).on("mouseleave",function(){$(Config.DOM.Preview).animate({scrollTop:0});$(Config.DOM.Preview).removeClass("active")});$(Config.DOM.Preview).on("mouseenter",function(){$(Config.DOM.Preview).addClass("active")})});String.prototype.Id=function(){return this.toLowerCase().split(" ").join("-")};String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?args[number]:match})};function PreviewItem(data){this.Construct=function(data){this.img=$("<img />",{src:data.URL,"class":"product-builder-preview-attribute-image"});Product.AddImage(this.img)};if(data!=null)this.Construct(data)}function Option(data){this.Construct=function(data){PreviewItem.call(this,data);this.value=data.Value;this.url=data.URL;this.listItem=$("<option />",{text:this.value,"class":"product-builder-attribute-dropdown",value:this.value})};this.Construct(data)}Option.prototype=new PreviewItem;function Preview(data){this.baseKeyframe="@keyframes {0} {\n	from {\n		-ms-transform: rotate({1}) translate({2}, {3});\n		-webkit-transform: rotate({1}) translate({2}, {3});\n		transform: rotate({1}) translate({2}, {3});\n	}\n    to {\n		-ms-transform: rotate({4}) translate({5}, {6}); \n		-webkit-transform: rotate({4}) translate({5}, {6}); \n		transform: rotate({4}) translate({5}, {6}); \n	}\n}\n";this.baseStyle="\n/* STYLE INFO FOR: {0} #{1} */\n#{1}.product-builder-preview-attribute {	\n	animation: {1}-off {2} ease forwards;\n}\nbody:not(.hide-full-list) {0}.active #{1} {\n	animation: {1}-on {2} ease forwards;\n}\n";this.Construct=function(data){this.container=$("<div />",{id:data.Title.Id(),"class":"product-builder-preview-attribute"});this.left=$("<div />",{"class":"product-builder-preview-button left",text:"<"});this.right=$("<div />",{"class":"product-builder-preview-button right",text:">"});this.container.append(this.left);this.container.append(this.right);this.left.on("click",this.OnLeft);this.right.on("click",this.OnRight);this.container.on("swipeleft",this.OnLeft);this.container.on("swiperight",this.OnRight);this.style=this.baseStyle.format(Config.DOM.Preview,data.Title.Id(),"500ms");this.keyframeOn=this.baseKeyframe.format(data.Title.Id()+"-on",data.Position.Off.R,data.Position.Off.X,data.Position.Off.Y,data.Position.On.R,data.Position.On.X,data.Position.On.Y);this.keyframeOff=this.baseKeyframe.format(data.Title.Id()+"-off",data.Position.On.R,data.Position.On.X,data.Position.On.Y,data.Position.Off.R,data.Position.Off.X,data.Position.Off.Y)};this.OnLeft=function(){this.setIndex("--")}.bind(this);this.OnRight=function(){this.setIndex("++")}.bind(this);this.AddOptionPreview=function(option){this.container.append(option.img)};this.SetOptionActive=function(option){$("#"+data.Title.Id()+" .active").removeClass("active");option.img.addClass("active")};if(data!=null)this.Construct(data)}function Attribute(data){this.Construct=function(data){Preview.call(this,data);this.title=data.Title;this.dropdown=$("<select />",{"class":"product-builder-attribute-dropdown",name:"properties[{0}]".format(this.title),id:this.title.Id()+"-dropdown"});this.label=$("<label />",{"for":this.title.Id()+"-dropdown",text:this.title+": "});this.index;this.options=[];for(var i=0;i<data.Options.length;i++){this.AddOption(data.Options[i])}this.dropdown.on("change",this.OnChange);this.setIndex(0);this.attributeContainer=$("<div />",{"class":"product-builder-attribute-container selector-wrapper",id:this.title.Id()+"-container"});this.attributeContainer.append(this.label);this.attributeContainer.append(this.dropdown)};this.AddOption=function(optionData){var temp=new Option(optionData);this.options.push(temp);this.dropdown.append(temp.listItem);this.AddOptionPreview(temp)};this.OnChange=function(event){var option=this.GetOption($(this.dropdown)[0].value);this.SetOptionActive(option)}.bind(this);this.GetOption=function(value){for(var i=0;i<this.options.length;i++){if(this.options[i].value==value)return this.options[i]}};this.setIndex=function(id){if(id=="--"){this.index--;if(this.index<0)this.index=this.options.length-1}else if(id=="++"){this.index++;if(this.index>=this.options.length)this.index=0}else{this.index=id}this.dropdown[0].value=this.options[this.index].value;this.dropdown.trigger("change")};this.Construct(data)}Attribute.prototype=new Preview;function Product(data){this.Construct=function(data){this.title=data.Title||"New Product";this.style=$("<style />",{"class":"product-builder-style"});this.fullContainer=$("<div />",{"class":"full-options-label-container"});this.label=$("<h3 />",{text:"Want even more control over your HuMn Wallet?"});this.yesButton=label=$("<input />",{type:"button","class":"yes-button",value:"Customize!"});this.yesButton.on("click",function(){$(document.body).removeClass("hide-full-list")});this.fullContainer.append(this.label);this.fullContainer.append(this.yesButton);this.attributes=[];for(var i=0;i<data.Attributes.length;i++){var temp=new Attribute(data.Attributes[i]);this.attributes.push(temp);this.style[0].innerHTML+=temp.style;this.style[0].innerHTML+=temp.keyframeOn;this.style[0].innerHTML+=temp.keyframeOff;$("body").append(this.style)}this.pallet=$("<div />",{"class":"color-pallet"});for(i=0;i<data.Presets.length;i++){var preset=data.Presets[i];classString="";for(j=0;j<preset.Attributes.length;j++)classString+=" "+preset.Attributes[j].Value.split(" ").join("rettophtempplaceholder");tempColorBox=$("<div />",{"class":"color-pallet-option"+classString,text:preset.Value,style:"background: "+preset.Color});tempColorBox.on("click",function(event){for(i=0;i<preset.Attributes.length;i++){console.log(event.target.classList);_product.attributes[i].dropdown[0].value=event.target.classList[i+1].split("rettophtempplaceholder").join(" ");$(_product.attributes[i].dropdown[0]).trigger("change")}});this.pallet.append(tempColorBox)}};this.Load=function(readonly){readonly=readonly||true;$($(Config.DOM.Title)[0]).append($("<h1/>",{text:this.title}));$(Config.DOM.Attributes).append(this.fullContainer);$(Config.DOM.Preview).addClass("loading");Product.LoadingAnimation=setInterval(function(){if($("#ProductBuilder-Loading-Animation").text().length<10){$("#ProductBuilder-Loading-Animation").text($("#ProductBuilder-Loading-Animation").text()+".")}else{$("#ProductBuilder-Loading-Animation").text("Loading")}},700);for(var i=0;i<this.attributes.length;i++){$($(Config.DOM.Preview)[0]).append(this.attributes[i].container);$($(Config.DOM.Attributes)[0]).append(this.attributes[i].attributeContainer)}$(Config.DOM.Preview).append(this.pallet);$(document.body).addClass("hide-full-list")};this.Construct(data)}Product.ReadyPreviewImageCount=0;Product.TotalPreviewImageCount=0;Product.AddImage=function(img){Product.TotalPreviewImageCount++;img.on("load",Product.ReadyImage)};Product.ReadyImage=function(){Product.ReadyPreviewImageCount++;if(Product.TotalPreviewImageCount==Product.ReadyPreviewImageCount)setTimeout(function(){$(".loading").removeClass("loading");setTimeout(function(){$("#loading").remove()},500)},500)};